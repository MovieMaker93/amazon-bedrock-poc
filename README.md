# Amazon Bedrock PoC
## Abstract
From the official Amazon [documentation](https://aws.amazon.com/bedrock/?nc1=h_ls):
Amazon Bedrock is a fully managed service that offers a choice of high-performing foundation models (FMs) with a single API.  
This simplicity ensures the smoothest development experience while maintaining security.  

This PoC aims to call the Bedrock API with a newly deployed AWS Lambda function.  
The infrastructure lifecycle is handled by Terraform.  

## Setting on Amazon for Bedrock
Before jumping down in the PoC, you need to activate the Foundation Model on your AWS account.  
Amazon Bedrock offers plenty of FMs to get started for your desired output.  
For the sake of this Demo, I choose the <b>AI21 Labs Jurassic-2 Mid </b> that accepts a prompt and generates text.  
The activation of the model is not granted by default.  
Follow along with this [guide](https://docs.aws.amazon.com/bedrock/latest/userguide/model-access.html) for access to your AWS account.  

> [!WARNING]
> Remember to prompt the **FM** as little as you can. The length of the response determines the amount of your bills.

## Requirements

- `pre-commit hook installed`  
- `terraform`  
- `Preconfigured AWS cli variables` --> more info [here](https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-envvars.html)  
- `python version >3.10`  
- `AWS CLI installed`  

## Instructions
First of all, go to the root of the repo and init your terraform:
```console
terraform init
```

After that:
```console
terraform plan
```

It will show a preview of the resources that will be deployed.
And finally,
```console
terraform apply
```

Now, you will have your lambda function and IAM role to prompt the Amazon Bedrock.
Let's prompt our FM with a text. For the options of the body request, check [here](https://docs.aws.amazon.com/bedrock/latest/userguide/model-parameters-jurassic2.html).

The prompt of the request to pass to the AWS lambda function is stored in **events.json** file:

events.json
```json
{
    "text": "write an article about amazon bedrock"
}



```
Next, invoke the lambda function through the **AWS CLI**:  
```console
aws lambda invoke --region us-east-1 --function-name bedrock_function --cli-binary-format raw-in-base64-out --payload file://events.json response.json
```

The output will be stored in the **response.json** file.  
The text will be 200 characters long, as previously configured in the body request.  
Below is an example generated by Bedrock:  
```console
"\n  Amazon Bedrock is a service that allows you to build and deploy serverless applications.\n  \n  It is easy to use and does not require any infrastructure to manage.\n  \n  In this article, we will show you how to write and deploy a simple serverless application using Amazon Bedrock.\n  \n  We will also show you how to use Amazon Bedrock to deploy your application to AWS Lambda.\n  \n  Let's get started!\n  \n  First, you will need to sign up for the Amazon Bedrock service.\n  You can do this by visiting the Amazon Bedrock website and clicking on the \"Sign Up\" button.\n  \n  Once you have signed up for Amazon Bedrock, you will need to create a new project.\n  You can do this by clicking on the \"Create Project\" button and following the instructions on the screen.\n  \n  Once you have created your project, you will need to create a new serverless application.\n  You can do this by clicking on the \"Create Application\" button and following the instructions on the screen.\n  \n  Once you have created your application, you will need to write some code.\n  You can do this by clicking on the \"Code\" button and following the instructions on the screen.\n  \n  Once you have written some code, you will need to deploy your application.\n  You can do this by clicking on the \"Deploy\" button"
```

## Wrap up
The serverless approach of Amazon with predefined Foundation Models allows us to develop an app in a glimpse of light.  
The pros are plenty:  
    1) The simplicity to get started (you have to call an API)
    2) Varying offers of Foundation Models
    3) The possibility of fine-tuning your Amazon Bedrock model by providing your own labeled training dataset
The cons:  
    1) Little bit expensive for on-demand mode

